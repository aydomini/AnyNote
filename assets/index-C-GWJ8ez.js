import{r as i}from"./react-vendor-9esfqqE9.js";import{j as q}from"./markdown-vendor-CHUou9Sa.js";var Z=({as:a="div",...d},u)=>q.jsx(a,{...d,ref:u}),ee=i.forwardRef(Z),re="https://challenges.cloudflare.com/turnstile/v0/api.js",N="cf-turnstile-script",te="cf-turnstile",$="onloadTurnstileCallback",H=a=>!!document.getElementById(a),ne=({render:a="explicit",onLoadCallbackName:d=$,scriptOptions:{nonce:u="",defer:e=!0,async:b=!0,id:f="",appendTo:m,onError:h,crossOrigin:y=""}={}})=>{let E=f||N;if(H(E))return;let s=document.createElement("script");s.id=E,s.src=`${re}?onload=${d}&render=${a}`,!document.querySelector(`script[src="${s.src}"]`)&&(s.defer=!!e,s.async=!!b,u&&(s.nonce=u),y&&(s.crossOrigin=y),h&&(s.onerror=h,delete window[d]),(m==="body"?document.body:document.getElementsByTagName("head")[0]).appendChild(s))},T={normal:{width:300,height:65},compact:{width:150,height:140},invisible:{width:0,height:0,overflow:"hidden"},flexible:{minWidth:300,width:"100%",height:65},interactionOnly:{width:"fit-content",height:"auto",display:"flex"}};function oe(a){if(a!=="invisible"&&a!=="interactionOnly")return a}function ie(a=N){let[d,u]=i.useState(!1);return i.useEffect(()=>{let e=()=>{H(a)&&u(!0)},b=new MutationObserver(e);return b.observe(document,{childList:!0,subtree:!0}),e(),()=>{b.disconnect()}},[a]),d}var O="unloaded",K,ae=new Promise((a,d)=>{K={resolve:a,reject:d},O==="ready"&&a(void 0)}),ce=(a=$)=>(O==="unloaded"&&(O="loading",window[a]=()=>{K.resolve(),O="ready",delete window[a]}),ae),ue=i.forwardRef((a,d)=>{let{scriptOptions:u,options:e={},siteKey:b,onWidgetLoad:f,onSuccess:m,onExpire:h,onError:y,onBeforeInteractive:E,onAfterInteractive:s,onUnsupported:C,onTimeout:j,onLoadScript:A,id:G,style:J,as:V="div",injectScript:P=!0,rerenderOnCallbackChange:c=!1,...X}=a,l=e.size,U=i.useCallback(()=>typeof l>"u"?{}:e.execution==="execute"?T.invisible:e.appearance==="interaction-only"?T.interactionOnly:T[l],[e.execution,l,e.appearance]),[_,I]=i.useState(U()),p=i.useRef(null),[v,z]=i.useState(!1),n=i.useRef(),R=i.useRef(!1),D=G||te,w=i.useRef({onSuccess:m,onError:y,onExpire:h,onBeforeInteractive:E,onAfterInteractive:s,onUnsupported:C,onTimeout:j});i.useEffect(()=>{c||(w.current={onSuccess:m,onError:y,onExpire:h,onBeforeInteractive:E,onAfterInteractive:s,onUnsupported:C,onTimeout:j})});let B=(u==null?void 0:u.id)||N,F=ie(B),M=(u==null?void 0:u.onLoadCallbackName)||$,Q=e.appearance||"always",S=i.useMemo(()=>({sitekey:b,action:e.action,cData:e.cData,theme:e.theme||"auto",language:e.language||"auto",tabindex:e.tabIndex,"response-field":e.responseField,"response-field-name":e.responseFieldName,size:oe(l),retry:e.retry||"auto","retry-interval":e.retryInterval||8e3,"refresh-expired":e.refreshExpired||"auto","refresh-timeout":e.refreshTimeout||"auto",execution:e.execution||"render",appearance:e.appearance||"always","feedback-enabled":e.feedbackEnabled||!0,callback:r=>{var t,o;R.current=!0,c?m==null||m(r):(o=(t=w.current).onSuccess)==null||o.call(t,r)},"error-callback":c?y:(...r)=>{var t,o;return(o=(t=w.current).onError)==null?void 0:o.call(t,...r)},"expired-callback":c?h:(...r)=>{var t,o;return(o=(t=w.current).onExpire)==null?void 0:o.call(t,...r)},"before-interactive-callback":c?E:(...r)=>{var t,o;return(o=(t=w.current).onBeforeInteractive)==null?void 0:o.call(t,...r)},"after-interactive-callback":c?s:(...r)=>{var t,o;return(o=(t=w.current).onAfterInteractive)==null?void 0:o.call(t,...r)},"unsupported-callback":c?C:(...r)=>{var t,o;return(o=(t=w.current).onUnsupported)==null?void 0:o.call(t,...r)},"timeout-callback":c?j:(...r)=>{var t,o;return(o=(t=w.current).onTimeout)==null?void 0:o.call(t,...r)}}),[e.action,e.appearance,e.cData,e.execution,e.language,e.refreshExpired,e.responseField,e.responseFieldName,e.retry,e.retryInterval,e.tabIndex,e.theme,e.feedbackEnabled,e.refreshTimeout,b,l,c,c?m:null,c?y:null,c?h:null,c?E:null,c?s:null,c?C:null,c?j:null]),g=i.useCallback(()=>typeof window<"u"&&!!window.turnstile,[]);return i.useEffect(function(){P&&!v&&ne({onLoadCallbackName:M,scriptOptions:{...u,id:B}})},[P,v,u,B]),i.useEffect(function(){O!=="ready"&&ce(M).then(()=>z(!0)).catch(console.error)},[]),i.useEffect(function(){if(!p.current||!v)return;let r=!1;return(async()=>{if(r||!p.current)return;let t=window.turnstile.render(p.current,S);n.current=t,n.current&&(f==null||f(n.current))})(),()=>{r=!0,n.current&&(window.turnstile.remove(n.current),R.current=!1)}},[D,v,S]),i.useImperativeHandle(d,()=>{let{turnstile:r}=window;return{getResponse(){if(!(r!=null&&r.getResponse)||!n.current||!g()){console.warn("Turnstile has not been loaded");return}return r.getResponse(n.current)},async getResponsePromise(t=3e4,o=100){return new Promise((Y,L)=>{let x,W=async()=>{if(R.current&&window.turnstile&&n.current)try{let k=window.turnstile.getResponse(n.current);return x&&clearTimeout(x),k?Y(k):L(new Error("No response received"))}catch(k){return x&&clearTimeout(x),console.warn("Failed to get response",k),L(new Error("Failed to get response"))}x||(x=setTimeout(()=>{x&&clearTimeout(x),L(new Error("Timeout"))},t)),await new Promise(k=>setTimeout(k,o)),await W()};W()})},reset(){if(!(r!=null&&r.reset)||!n.current||!g()){console.warn("Turnstile has not been loaded");return}e.execution==="execute"&&I(T.invisible);try{R.current=!1,r.reset(n.current)}catch(t){console.warn(`Failed to reset Turnstile widget ${n}`,t)}},remove(){if(!(r!=null&&r.remove)||!n.current||!g()){console.warn("Turnstile has not been loaded");return}I(T.invisible),R.current=!1,r.remove(n.current),n.current=null},render(){if(!(r!=null&&r.render)||!p.current||!g()||n.current){console.warn("Turnstile has not been loaded or container not found");return}let t=r.render(p.current,S);return n.current=t,n.current&&(f==null||f(n.current)),e.execution!=="execute"&&I(l?T[l]:{}),t},execute(){if(e.execution!=="execute"){console.warn('Execution mode is not set to "execute"');return}if(!(r!=null&&r.execute)||!p.current||!n.current||!g()){console.warn("Turnstile has not been loaded or container not found");return}r.execute(p.current,S),I(l?T[l]:{})},isExpired(){return!(r!=null&&r.isExpired)||!n.current||!g()?(console.warn("Turnstile has not been loaded"),!1):r.isExpired(n.current)}}},[n,e.execution,l,S,p,g,v,f]),i.useEffect(()=>{F&&!v&&window.turnstile&&z(!0)},[v,F]),i.useEffect(()=>{I(U())},[e.execution,l,Q]),i.useEffect(()=>{!F||typeof A!="function"||A()},[F]),q.jsx(ee,{ref:p,as:V,id:D,style:{..._,...J},...X})});ue.displayName="Turnstile";export{ue as E};
//# sourceMappingURL=index-C-GWJ8ez.js.map
