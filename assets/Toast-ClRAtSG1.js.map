{"version":3,"file":"Toast-ClRAtSG1.js","sources":["../../src/components/ConfirmDialog.tsx","../../src/hooks/useConfirmDialog.tsx","../../src/hooks/useToast.ts","../../src/components/Toast.tsx"],"sourcesContent":["import type { ReactNode } from 'react';\n\ninterface ConfirmDialogProps {\n  open: boolean;\n  title: string;\n  description?: ReactNode;\n  confirmLabel: string;\n  cancelLabel: string;\n  variant?: 'default' | 'danger';\n  onConfirm: () => void;\n  onCancel: () => void;\n}\n\n/**\n * 通用确认对话框组件，统一确认交互样式。\n */\nexport function ConfirmDialog({\n  open,\n  title,\n  description,\n  confirmLabel,\n  cancelLabel,\n  variant = 'default',\n  onCancel,\n  onConfirm,\n}: ConfirmDialogProps) {\n  if (!open) {\n    return null;\n  }\n\n  const confirmButtonBase =\n    'flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2';\n  const confirmButtonClass =\n    variant === 'danger'\n      ? `${confirmButtonBase} bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500 dark:bg-red-500 dark:hover:bg-red-400`\n      : `${confirmButtonBase} bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500 dark:bg-blue-500 dark:hover:bg-blue-400`;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4\">\n      <div className=\"w-full max-w-md rounded-xl border border-gray-200 bg-white p-6 shadow-xl dark:border-gray-700 dark:bg-gray-800\">\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">{title}</h3>\n        {description && (\n          <p className=\"mt-3 text-sm leading-6 text-gray-600 dark:text-gray-300 whitespace-pre-line\">{description}</p>\n        )}\n\n        <div className=\"mt-6 flex gap-3\">\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"flex-1 px-4 py-2 rounded-lg text-sm font-semibold text-gray-700 transition-colors hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 dark:text-gray-200 dark:hover:bg-gray-700\"\n          >\n            {cancelLabel}\n          </button>\n          <button type=\"button\" onClick={onConfirm} className={confirmButtonClass}>\n            {confirmLabel}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useCallback, useMemo, useState } from 'react';\nimport { ConfirmDialog } from '@/components/ConfirmDialog';\n\nexport interface ConfirmDialogOptions {\n  title: string;\n  description?: string;\n  confirmLabel: string;\n  cancelLabel: string;\n  variant?: 'default' | 'danger';\n}\n\ninterface ConfirmDialogState {\n  open: boolean;\n  options: ConfirmDialogOptions;\n  resolver?: (result: boolean) => void;\n}\n\n/**\n * Promise 化的确认对话框钩子，用于替换浏览器原生 confirm。\n */\nexport function useConfirmDialog() {\n  const [state, setState] = useState<ConfirmDialogState | null>(null);\n\n  const confirm = useCallback((options: ConfirmDialogOptions) => {\n    return new Promise<boolean>((resolve) => {\n      setState({\n        open: true,\n        options,\n        resolver: resolve,\n      });\n    });\n  }, []);\n\n  const handleClose = useCallback(\n    (result: boolean) => {\n      if (state?.resolver) {\n        state.resolver(result);\n      }\n      setState(null);\n    },\n    [state],\n  );\n\n  const dialog = useMemo(() => {\n    if (!state) {\n      return null;\n    }\n\n    return (\n      <ConfirmDialog\n        open={state.open}\n        title={state.options.title}\n        description={state.options.description}\n        confirmLabel={state.options.confirmLabel}\n        cancelLabel={state.options.cancelLabel}\n        variant={state.options.variant}\n        onConfirm={() => handleClose(true)}\n        onCancel={() => handleClose(false)}\n      />\n    );\n  }, [handleClose, state]);\n\n  return { confirm, ConfirmDialog: dialog };\n}\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nexport type ToastVariant = 'success' | 'error' | 'warning' | 'info';\n\ninterface UseToastOptions {\n  duration?: number;\n  variant?: ToastVariant;\n}\n\ninterface ToastOptions {\n  duration?: number;\n  variant?: ToastVariant;\n}\n\nexport interface ToastState {\n  message: string;\n  variant: ToastVariant;\n}\n\ninterface ToastController {\n  toast: ToastState | null;\n  showToast: (message: string, options?: ToastOptions) => void;\n  hideToast: () => void;\n}\n\n/**\n * 统一的 Toast 计时器钩子，避免在各处手动维护 setTimeout。\n */\nexport function useToast(options: UseToastOptions = {}): ToastController {\n  const { duration = 3000, variant: defaultVariant = 'info' } = options;\n  const [toast, setToast] = useState<ToastState | null>(null);\n  const timerRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  const clearTimer = useCallback(() => {\n    if (timerRef.current !== null) {\n      clearTimeout(timerRef.current);\n      timerRef.current = null;\n    }\n  }, []);\n\n  const hideToast = useCallback(() => {\n    clearTimer();\n    setToast(null);\n  }, [clearTimer]);\n\n  const showToast = useCallback(\n    (message: string, toastOptions: ToastOptions = {}) => {\n      const nextVariant = toastOptions.variant ?? defaultVariant;\n      const nextDuration = toastOptions.duration ?? duration;\n\n      clearTimer();\n      setToast({ message, variant: nextVariant });\n\n      if (nextDuration > 0) {\n        timerRef.current = setTimeout(() => {\n          setToast(null);\n          timerRef.current = null;\n        }, nextDuration);\n      }\n    },\n    [clearTimer, defaultVariant, duration],\n  );\n\n  useEffect(() => {\n    return () => hideToast();\n  }, [hideToast]);\n\n  return { toast, showToast, hideToast };\n}\n","import type { ReactNode } from 'react';\nimport type { ToastState, ToastVariant } from '@/hooks/useToast';\n\ninterface ToastProps extends ToastState {\n  onClose?: () => void;\n}\n\nconst variantStyle: Record<ToastVariant, { container: string; icon: ReactNode }> = {\n  success: {\n    container: 'bg-green-500 text-white',\n    icon: (\n      <svg className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden>\n        <path\n          fillRule=\"evenodd\"\n          d=\"M16.707 5.293a1 1 0 00-1.414 0L8 12.586 4.707 9.293a1 1 0 00-1.414 1.414l4 4a1 1 0 001.414 0l8-8a1 1 0 000-1.414z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n    ),\n  },\n  error: {\n    container: 'bg-red-500 text-white',\n    icon: (\n      <svg className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden>\n        <path\n          fillRule=\"evenodd\"\n          d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm-1-5a1 1 0 112 0 1 1 0 01-2 0zm.293-7.707a1 1 0 011.414 0l.086.086a1 1 0 01.207.324l.019.055a1 1 0 01.081.391l-.003.09-.5 5a1 1 0 01-.993.911H9.396a1 1 0 01-.993-.883l-.5-5a1 1 0 01.32-.828z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n    ),\n  },\n  warning: {\n    container: 'bg-amber-500 text-white',\n    icon: (\n      <svg className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden>\n        <path d=\"M8.257 3.099c.764-1.36 2.722-1.36 3.486 0l6.518 11.614c.75 1.338-.213 3.012-1.743 3.012H3.482c-1.53 0-2.493-1.674-1.743-3.012L8.257 3.1z\" />\n        <path d=\"M11 13a1 1 0 10-2 0 1 1 0 002 0z\" fill=\"#1f2937\" />\n        <path d=\"M10 7a1 1 0 00-1 1v3a1 1 0 102 0V8a1 1 0 00-1-1z\" fill=\"#1f2937\" />\n      </svg>\n    ),\n  },\n  info: {\n    container: 'bg-blue-500 text-white',\n    icon: (\n      <svg className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden>\n        <path\n          fillRule=\"evenodd\"\n          d=\"M18 10A8 8 0 110 10a8 8 0 0116 0zm-7-4a1 1 0 10-2 0 1 1 0 002 0zm-1 3a1 1 0 00-.993.883L9 10v4a1 1 0 001.993.117L11 14v-4a1 1 0 00-1-1z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n    ),\n  },\n};\n\nexport function Toast({ message, variant, onClose }: ToastProps) {\n  const style = variantStyle[variant];\n\n  return (\n    <div\n      className={`fixed top-20 right-4 z-50 flex items-center gap-2 rounded-lg px-4 py-3 shadow-lg animate-fade-in ${style.container}`}\n      role=\"status\"\n      aria-live=\"polite\"\n    >\n      {style.icon}\n      <span className=\"text-sm font-medium\">{message}</span>\n      {onClose && (\n        <button\n          type=\"button\"\n          onClick={onClose}\n          className=\"ml-3 text-sm font-semibold leading-none text-white/80 hover:text-white focus:outline-none\"\n        >\n          ×\n        </button>\n      )}\n    </div>\n  );\n}\n"],"names":["ConfirmDialog","open","title","description","confirmLabel","cancelLabel","variant","onCancel","onConfirm","confirmButtonBase","confirmButtonClass","jsxs","jsx","useConfirmDialog","state","setState","useState","confirm","useCallback","options","resolve","handleClose","result","dialog","useMemo","useToast","duration","defaultVariant","toast","setToast","timerRef","useRef","clearTimer","hideToast","showToast","message","toastOptions","nextVariant","nextDuration","useEffect","variantStyle","Toast","onClose","style"],"mappings":"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"}